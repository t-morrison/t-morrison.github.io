<!DOCTYPE html>
<html>
	
	<head>
		<meta charset="utf-8">
		<title>Natural Gas Something</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
			
	</head>

	<body>
		<div>
			<p> Auto-scaling graph with date axis </p>
			<input type="text" id="heightIn" value="Height">
			<input type="text" id="widthIn" value="Width">
			<button id='button' onclick="sizeFunction()">Change size</button>
			
			<p>Enter a height and width (pixels) and click the button to adjust the size of the graph</p>

			<div>
				U.S. Natural Gas Gross Withdrawals from Gas Wells (MMcf) <br>
				
			</div>
		</div>		
		<div id='plot'></div>
		<div>Data from US Energy Information Administration: <a href="https://www.eia.gov/opendata/qb.php?sdid=NG.N9011US2.M" target="_blank">link</a> </div>
		
		<script>
		
			
			var dataset = [{"Date":"1991-01-15","Amount":1482053},{"Date":"1991-10-15","Amount":1363737},{"Date":"1993-01-15","Amount":1452098},{"Date":"1993-02-15","Amount":1305490},{"Date":"1993-03-15","Amount":1420719},{"Date":"1993-04-15","Amount":1349960},{"Date":"1993-05-15","Amount":1374045},{"Date":"1993-06-15","Amount":1316448},{"Date":"1993-07-15","Amount":1374565},{"Date":"1993-08-15","Amount":1374824},{"Date":"1993-09-15","Amount":1352121},{"Date":"1993-10-15","Amount":1424561},{"Date":"1993-11-15","Amount":1435581},{"Date":"1993-12-15","Amount":1510727},{"Date":"1994-01-15","Amount":1487815},{"Date":"1994-02-15","Amount":1341637},{"Date":"1994-03-15","Amount":1489504},{"Date":"1994-04-15","Amount":1422603},{"Date":"1994-05-15","Amount":1466838},{"Date":"1994-06-15","Amount":1394919},{"Date":"1994-07-15","Amount":1449773},{"Date":"1994-08-15","Amount":1457931},{"Date":"1994-09-15","Amount":1379647},{"Date":"1994-10-15","Amount":1437632},{"Date":"1994-11-15","Amount":1482072},{"Date":"1994-12-15","Amount":1540690},{"Date":"1995-01-15","Amount":1487207},{"Date":"1995-02-15","Amount":1324526},{"Date":"1995-03-15","Amount":1465860},{"Date":"1995-04-15","Amount":1419248},{"Date":"1995-05-15","Amount":1461017},{"Date":"1995-06-15","Amount":1404089},{"Date":"1995-07-15","Amount":1447888},{"Date":"1995-08-15","Amount":1435325},{"Date":"1995-09-15","Amount":1400318},{"Date":"1995-10-15","Amount":1431457},{"Date":"1995-11-15","Amount":1474766},{"Date":"1995-12-15","Amount":1530330},{"Date":"1996-01-15","Amount":1499471},{"Date":"1996-02-15","Amount":1418460},{"Date":"1996-03-15","Amount":1497139},{"Date":"1996-04-15","Amount":1477216},{"Date":"1996-05-15","Amount":1509627},{"Date":"1996-06-15","Amount":1445965},{"Date":"1996-07-15","Amount":1492362},{"Date":"1996-08-15","Amount":1500437},{"Date":"1996-09-15","Amount":1443804},{"Date":"1996-10-15","Amount":1480154},{"Date":"1996-11-15","Amount":1470322},{"Date":"1996-12-15","Amount":1502402},{"Date":"1997-01-15","Amount":1545720},{"Date":"1997-02-15","Amount":1397900},{"Date":"1997-03-15","Amount":1546405},{"Date":"1997-04-15","Amount":1473932},{"Date":"1997-05-15","Amount":1525001},{"Date":"1997-06-15","Amount":1440794},{"Date":"1997-07-15","Amount":1504999},{"Date":"1997-08-15","Amount":1500784},{"Date":"1997-09-15","Amount":1467467},{"Date":"1997-10-15","Amount":1503523},{"Date":"1997-11-15","Amount":1455568},{"Date":"1997-12-15","Amount":1481988},{"Date":"1998-01-15","Amount":1543944},{"Date":"1998-02-15","Amount":1375574},{"Date":"1998-03-15","Amount":1536229},{"Date":"1998-04-15","Amount":1482841},{"Date":"1998-05-15","Amount":1532317},{"Date":"1998-06-15","Amount":1469772},{"Date":"1998-07-15","Amount":1499489},{"Date":"1998-08-15","Amount":1511626},{"Date":"1998-09-15","Amount":1377167},{"Date":"1998-10-15","Amount":1487808},{"Date":"1998-11-15","Amount":1437187},{"Date":"1998-12-15","Amount":1474565},{"Date":"1999-01-15","Amount":1519828},{"Date":"1999-02-15","Amount":1371577},{"Date":"1999-03-15","Amount":1516696},{"Date":"1999-04-15","Amount":1448589},{"Date":"1999-05-15","Amount":1471196},{"Date":"1999-06-15","Amount":1440555},{"Date":"1999-07-15","Amount":1480127},{"Date":"1999-08-15","Amount":1476939},{"Date":"1999-09-15","Amount":1428504},{"Date":"1999-10-15","Amount":1480719},{"Date":"1999-11-15","Amount":1456680},{"Date":"1999-12-15","Amount":1498776},{"Date":"2000-01-15","Amount":1500689},{"Date":"2000-02-15","Amount":1386089},{"Date":"2000-03-15","Amount":1509267},{"Date":"2000-04-15","Amount":1430754},{"Date":"2000-05-15","Amount":1482754},{"Date":"2000-06-15","Amount":1447790},{"Date":"2000-07-15","Amount":1494463},{"Date":"2000-08-15","Amount":1504043},{"Date":"2000-09-15","Amount":1457946},{"Date":"2000-10-15","Amount":1537320},{"Date":"2000-11-15","Amount":1459173},{"Date":"2000-12-15","Amount":1524111},{"Date":"2001-01-15","Amount":1546300},{"Date":"2001-02-15","Amount":1403555},{"Date":"2001-03-15","Amount":1563329},{"Date":"2001-04-15","Amount":1502213},{"Date":"2001-05-15","Amount":1553485},{"Date":"2001-06-15","Amount":1479003},{"Date":"2001-07-15","Amount":1527743},{"Date":"2001-08-15","Amount":1537215},{"Date":"2001-09-15","Amount":1487642},{"Date":"2001-10-15","Amount":1543334},{"Date":"2001-11-15","Amount":1465831},{"Date":"2001-12-15","Amount":1519758},{"Date":"2002-01-15","Amount":1520193},{"Date":"2002-02-15","Amount":1368103},{"Date":"2002-03-15","Amount":1526142},{"Date":"2002-04-15","Amount":1474364},{"Date":"2002-05-15","Amount":1530867},{"Date":"2002-06-15","Amount":1473359},{"Date":"2002-07-15","Amount":1538781},{"Date":"2002-08-15","Amount":1516307},{"Date":"2002-09-15","Amount":1424105},{"Date":"2002-10-15","Amount":1457092},{"Date":"2002-11-15","Amount":1456391},{"Date":"2002-12-15","Amount":1509154},{"Date":"2003-01-15","Amount":1506749},{"Date":"2003-02-15","Amount":1371901},{"Date":"2003-03-15","Amount":1554621},{"Date":"2003-04-15","Amount":1494461},{"Date":"2003-05-15","Amount":1519868},{"Date":"2003-06-15","Amount":1472112},{"Date":"2003-07-15","Amount":1496631},{"Date":"2003-08-15","Amount":1522279},{"Date":"2003-09-15","Amount":1464096},{"Date":"2003-10-15","Amount":1520182},{"Date":"2003-11-15","Amount":1456967},{"Date":"2003-12-15","Amount":1501934},{"Date":"2004-01-15","Amount":1532749},{"Date":"2004-02-15","Amount":1418026},{"Date":"2004-03-15","Amount":1538681},{"Date":"2004-04-15","Amount":1494374},{"Date":"2004-05-15","Amount":1514712},{"Date":"2004-06-15","Amount":1478979},{"Date":"2004-07-15","Amount":1527786},{"Date":"2004-08-15","Amount":1512791},{"Date":"2004-09-15","Amount":1424864},{"Date":"2004-10-15","Amount":1493725},{"Date":"2004-11-15","Amount":1457249},{"Date":"2004-12-15","Amount":1491312},{"Date":"2005-01-15","Amount":1505374},{"Date":"2005-02-15","Amount":1373818},{"Date":"2005-03-15","Amount":1537205},{"Date":"2005-04-15","Amount":1476787},{"Date":"2005-05-15","Amount":1519640},{"Date":"2005-06-15","Amount":1480651},{"Date":"2005-07-15","Amount":1500786},{"Date":"2005-08-15","Amount":1495336},{"Date":"2005-09-15","Amount":1309037},{"Date":"2005-10-15","Amount":1384951},{"Date":"2005-11-15","Amount":1409999},{"Date":"2005-12-15","Amount":1478263},{"Date":"2006-01-15","Amount":1494607},{"Date":"2006-02-15","Amount":1350470},{"Date":"2006-03-15","Amount":1509581},{"Date":"2006-04-15","Amount":1458547},{"Date":"2006-05-15","Amount":1518803},{"Date":"2006-06-15","Amount":1493807},{"Date":"2006-07-15","Amount":1530932},{"Date":"2006-08-15","Amount":1531447},{"Date":"2006-09-15","Amount":1491023},{"Date":"2006-10-15","Amount":1545414},{"Date":"2006-11-15","Amount":1504834},{"Date":"2006-12-15","Amount":1566091},{"Date":"2007-01-15","Amount":1208647},{"Date":"2007-02-15","Amount":1109144},{"Date":"2007-03-15","Amount":1256526},{"Date":"2007-04-15","Amount":1197836},{"Date":"2007-05-15","Amount":1273889},{"Date":"2007-06-15","Amount":1237733},{"Date":"2007-07-15","Amount":1261842},{"Date":"2007-08-15","Amount":1272772},{"Date":"2007-09-15","Amount":1251805},{"Date":"2007-10-15","Amount":1291776},{"Date":"2007-11-15","Amount":1289592},{"Date":"2007-12-15","Amount":1340328},{"Date":"2008-01-15","Amount":1252450},{"Date":"2008-02-15","Amount":1194793},{"Date":"2008-03-15","Amount":1297482},{"Date":"2008-04-15","Amount":1244781},{"Date":"2008-05-15","Amount":1289355},{"Date":"2008-06-15","Amount":1266631},{"Date":"2008-07-15","Amount":1332342},{"Date":"2008-08-15","Amount":1312278},{"Date":"2008-09-15","Amount":1099286},{"Date":"2008-10-15","Amount":1267363},{"Date":"2008-11-15","Amount":1267551},{"Date":"2008-12-15","Amount":1310331},{"Date":"2009-01-15","Amount":1251742},{"Date":"2009-02-15","Amount":1155107},{"Date":"2009-03-15","Amount":1253396},{"Date":"2009-04-15","Amount":1192387},{"Date":"2009-05-15","Amount":1227955},{"Date":"2009-06-15","Amount":1193379},{"Date":"2009-07-15","Amount":1202314},{"Date":"2009-08-15","Amount":1224882},{"Date":"2009-09-15","Amount":1134504},{"Date":"2009-10-15","Amount":1202397},{"Date":"2009-11-15","Amount":1178120},{"Date":"2009-12-15","Amount":1198103},{"Date":"2010-01-15","Amount":1133912},{"Date":"2010-02-15","Amount":1052308},{"Date":"2010-03-15","Amount":1160678},{"Date":"2010-04-15","Amount":1114216},{"Date":"2010-05-15","Amount":1144376},{"Date":"2010-06-15","Amount":1089664},{"Date":"2010-07-15","Amount":1103493},{"Date":"2010-08-15","Amount":1116748},{"Date":"2010-09-15","Amount":1069752},{"Date":"2010-10-15","Amount":1103121},{"Date":"2010-11-15","Amount":1055096},{"Date":"2010-12-15","Amount":1104134},{"Date":"2011-01-15","Amount":1055851},{"Date":"2011-02-15","Amount":938227},{"Date":"2011-03-15","Amount":1073020},{"Date":"2011-04-15","Amount":1033091},{"Date":"2011-05-15","Amount":1057528},{"Date":"2011-06-15","Amount":1012955},{"Date":"2011-07-15","Amount":1039485},{"Date":"2011-08-15","Amount":1029990},{"Date":"2011-09-15","Amount":992944},{"Date":"2011-10-15","Amount":1031751},{"Date":"2011-11-15","Amount":999917},{"Date":"2011-12-15","Amount":1026310},{"Date":"2012-01-15","Amount":1125753},{"Date":"2012-02-15","Amount":1032209},{"Date":"2012-03-15","Amount":1099787},{"Date":"2012-04-15","Amount":1032068},{"Date":"2012-05-15","Amount":1055642},{"Date":"2012-06-15","Amount":1008131},{"Date":"2012-07-15","Amount":1066571},{"Date":"2012-08-15","Amount":1051540},{"Date":"2012-09-15","Amount":1020391},{"Date":"2012-10-15","Amount":1029999},{"Date":"2012-11-15","Amount":988465},{"Date":"2012-12-15","Amount":993671},{"Date":"2013-01-15","Amount":933301},{"Date":"2013-02-15","Amount":846692},{"Date":"2013-03-15","Amount":932103},{"Date":"2013-04-15","Amount":905886},{"Date":"2013-05-15","Amount":923166},{"Date":"2013-06-15","Amount":891462},{"Date":"2013-07-15","Amount":913497},{"Date":"2013-08-15","Amount":910896},{"Date":"2013-09-15","Amount":859246},{"Date":"2013-10-15","Amount":897422},{"Date":"2013-11-15","Amount":863925},{"Date":"2013-12-15","Amount":881949},{"Date":"2014-01-15","Amount":842317},{"Date":"2014-02-15","Amount":789097},{"Date":"2014-03-15","Amount":881366},{"Date":"2014-04-15","Amount":844658},{"Date":"2014-05-15","Amount":852465},{"Date":"2014-06-15","Amount":835510},{"Date":"2014-07-15","Amount":863511},{"Date":"2014-08-15","Amount":884007},{"Date":"2014-09-15","Amount":841238},{"Date":"2014-10-15","Amount":844552},{"Date":"2014-11-15","Amount":810902},{"Date":"2014-12-15","Amount":833795},{"Date":"2015-01-15","Amount":819328},{"Date":"2015-02-15","Amount":753701},{"Date":"2015-03-15","Amount":850642},{"Date":"2015-04-15","Amount":828435},{"Date":"2015-05-15","Amount":834177},{"Date":"2015-06-15","Amount":802353},{"Date":"2015-07-15","Amount":831034},{"Date":"2015-08-15","Amount":828194},{"Date":"2015-09-15","Amount":809867},{"Date":"2015-10-15","Amount":819665},{"Date":"2015-11-15","Amount":793070},{"Date":"2015-12-15","Amount":814373}]
			
			var h = 400
			var w = 1000
			var xpad = 100  //x in pixels
			var ypad = 20 //y is in pixels
			var barpad = .25
			
			var heightIn
			var widthIn
			
			function sizeFunction() {
				h = Number(document.getElementById("heightIn").value)
				w = Number(document.getElementById("widthIn").value)
				d3.select('svg').remove()
				makeMap()
				}
			
			//$('#button').on('click', function() {
							
			//	});
			
			function makeMap() {
			var xScale = d3.scaleLinear()
							.domain([0,dataset.length])
							.range([xpad, w-xpad])
							
			var yScale = d3.scaleLinear()
							.domain([0, d3.max(dataset, function(d) {return d.Amount})])
							.range([h-ypad, 0])
			
			
			var yAxis = d3.axisLeft(yScale)
			var xAxis = d3.axisBottom(xScale)
			
			d3.select('#plot').style('width','100%').append('svg').attr('width', w).attr('height',h)
				.selectAll('rect')
				.data(dataset)
				.enter()
				.append('rect')
					.attr('fill','black')
				  
					.attr('x', function(d,i){ return xScale(i) })
					.attr('y', function(d){return yScale(d.Amount) })	// + '%'})
					
					.attr('height', function(d){return h - yScale(d.Amount)-ypad })// + '%'} )
				  	.attr('width', 100 / dataset.length - barpad + '%')
			
			//var pxWidth = document.getElementById('plot').clientWidth// * (w/100)
			
			var timeScale = d3.scaleTime()
								.domain( [ new Date(d3.min(dataset, function(d) {return d.Date})), new Date(d3.max(dataset, function(d) {return d.Date})) ] )
								.range([xpad,w-xpad])
								
			
			var timeAxis = d3.axisBottom(timeScale)
								  		//(if(w>550) function() {return 4})
			
			if(w<=375) { timeAxis = d3.axisBottom(timeScale)
										.ticks(3)
					} else if (w>375 && w < 700) {
						timeAxis = d3.axisBottom(timeScale)
										.ticks(7)
						};
			
			
			d3.select('svg')
				.append('g')
					.attr("transform", "translate("+ xpad +",0)")
					.call(yAxis)
			
			d3.select('svg')
				.append('g')
					.attr("transform", "translate(0,"+ (h-ypad) +")")
					.call(timeAxis)
					
			//d3.select('svg').append('circle')
			//	.attr('cx',900)
			//	.attr('cy',100)
			//	.attr('r',12)
			
			
				d3.selectAll('rect')
					.attr('y',h-ypad)
					.attr('height',0)
					.transition()
					.delay(function(d,i) { return i * 30 })
					.duration(1000)
					.attr('y', function(d){return yScale(d.Amount) })	// + '%'})
					.attr('height', function(d){return h - yScale(d.Amount)-ypad })// + '%'} )
			
			
			};

			window.onload = makeMap
			
			
		
		</script>
	</body>


</html>